# chezmoi:template:left-delimiter="# [[" right-delimiter="]] #"
{{ $ghuser := output "gh" "api" "user" "--jq" ".login" | trim }}
{{ $ghemail := output "gh" "api" "user" "--jq" ".email" | trim }}

sourceDir = # [[ .chezmoi.sourceDir | quote ]] #

[data]
  name = {{ $ghuser | quote }}
  email = {{ if $ghemail }}{{ $ghemail | quote }}{{ else }}{{ printf "%s@users.noreply.github.com" $ghuser | quote }}{{ end }}

[diff]
  command = "difft"
  args = ["--display=inline", "{{ .Destination }}", "{{ .Target }}"]

[merge]
  command = "nvim"
  args = ["-d", "{{ .Destination }}", "{{ .Source }}", "{{ .Target }}"]
