#!/bin/sh

# -e: exit on error
# -u: exit on unset variables
set -eu

# This script installs Git, GitHub CLI and Git LFS on macOS using Homebrew

# Install Git if not already installed
if ! command -v git >/dev/null 2>&1; then
  echo "Installing Git..."
  if command -v brew >/dev/null 2>&1; then
    brew install git
  else
    echo "Homebrew not found. Please install Homebrew first: https://brew.sh/"
    exit 1
  fi
  echo "Git has been installed successfully."
else
  echo "Git is already installed."
fi

# Install GitHub CLI if not already installed
if ! command -v gh >/dev/null 2>&1; then
  echo "Installing GitHub CLI..."
  if command -v brew >/dev/null 2>&1; then
    brew install gh
  else
    echo "Homebrew not found. Please install Homebrew first: https://brew.sh/"
    exit 1
  fi
  echo "GitHub CLI has been installed successfully."
else
  echo "GitHub CLI is already installed."
fi

# Install Git LFS if not already installed
if ! command -v git-lfs >/dev/null 2>&1; then
  echo "Installing Git LFS..."
  if command -v brew >/dev/null 2>&1; then
    brew install git-lfs
    git lfs install --skip-repo
  else
    echo "Homebrew not found. Please install Homebrew first: https://brew.sh/"
    exit 1
  fi
  echo "Git LFS has been installed successfully."
else
  echo "Git LFS is already installed."
fi
